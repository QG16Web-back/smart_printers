webpackJsonp([2],{"0u0K":function(t,n,e){"use strict";var a=e("MVMM"),r=e("zO6J"),i=e("4g3E");a.default.use(r.a),n.a=new r.a({routes:[{path:"/orderindex",name:"OrderIndex",component:i.a}]})},3:function(t,n,e){e("briU"),t.exports=e("hJ9p")},"4g3E":function(t,n,e){"use strict";var a={name:"printer",props:["printer"],data:function(){return{ptst:["切刀错误","机盒打开","纸将用尽","正在进纸","机芯高温","正常状态","待定","待定","待定","待定","待定","普通缓冲区满","紧急缓冲区满","健康状态","亚健康状态","异常状态"]}},computed:{statusText:function(){var t=this;return this.ptst.filter(function(n,e){if(e+1==parseInt(t.printer.printerStatus))return n})[0]},statusClass:function(){var t="printer_healthy";switch(parseInt(this.printer.printerStatus)){case 6:case 7:case 8:case 9:case 10:case 11:case 14:t=" printer_healthy";break;case 1:case 2:case 5:t=" printer_abnormal";break;case 3:case 4:case 12:case 13:case 15:t=" printer_subhealthy";break;default:console.info("other status")}return t}},methods:{toPrinter:function(t){window.open("../../html/printerIndex.html?printerId="+t)}}},r={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("li",[e("span"),t._v(" "),e("p"),e("div",{on:{click:function(n){t.toPrinter(t.printer.printerId)}}},[t._v("\n            \t"+t._s(t.printer.printerId)+"号主控板"),e("br"),t._v("\n\t\t\t\t主板状态："+t._s(t.printer.printerStatus)+"\n              "),e("br"),t._v("打印机数量："+t._s(t.printer.unitsSum)+"\n            ")]),t._v(" "),e("p")])},staticRenderFns:[]};var i=e("vSla")(a,r,!1,function(t){e("8bN1")},"data-v-19f170dc",null).exports,s=e("aozt"),c=e.n(s),o={name:"addprinter",props:["value","userid"],data:function(){return{}},methods:{addprinter:function(){var t=this;c.a.post("http://10.21.48.11:8686/printer/add/"+this.userid+"/"+this.value).then(function(n){200==n.status&&t.$emit("add")}).catch(function(t){alert("增加打印机失败!")})},quit:function(){this.display="none"},update:function(t){this.$emit("input",Number(t))}}},u={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h2",[t._v("新打印机")]),t._v(" "),e("input",{attrs:{type:"text",placeholder:"新增打印机编号"},domProps:{value:t.value},on:{input:function(n){t.update(n.target.value)}}}),e("br"),t._v(" "),e("button",{attrs:{type:"submit"},on:{click:t.addprinter}},[t._v("确定")]),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var d=e("vSla")(o,u,!1,function(t){e("F97/")},"data-v-68c861e1",null).exports,p=(e("9rMa"),{name:"orderindex",components:{Printer:i,AddPrinter:d},data:function(){return{isShow:!0,isAddShow:!1,userName:"小明",userId:1,newPrinterId:"",error:1,connumber:12,tuntu:300,number:300,add:1,total:3,time:!1,printing:"是",printerList:[],typingList:[],typedList:[],curList:[]}},methods:{inv:function(){},showTyped:function(){var t=this,n=this;c.a.get("http://47.106.74.67:8080/order/typed/"+this.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取正在打印订单失败!")}),clearInterval(n.time),n.time=setInterval(function(){c.a.get("http://47.106.74.67:8080/order/typed/"+t.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取正在打印订单失败!")}),c.a.get("http://47.106.74.67:8080/order/typing/"+t.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取打印完成订单失败!")})},2e3),this.isShow=!1},showTyping:function(){var t=this,n=this;c.a.get("http://47.106.74.67:8080/order/typing/"+this.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取打印完成订单失败!")}),clearInterval(n.time),n.time=setInterval(function(){c.a.get("http://47.106.74.67:8080/order/typed/"+t.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取正在打印订单失败!")}),c.a.get("http://47.106.74.67:8080/order/typing/"+t.userId).then(function(t){n.curList=t.data.data}).catch(function(t){alert("获取打印完成订单失败!")})},2e4),this.isShow=!0,this.inv()},showOrderText:function(t){return["打印成功","打印失败","进入打印队列","开始打印","数据错误","打印成功-之前的异常订单","异常单打印出错","异常单进入打印队列","异常单开始打印","异常单数据错误","订单准备发送到打印机","订单已发放到打印机"].filter(function(n,e){if(e==parseInt(t))return n})[0]},showPrinters:function(){var t=this;c.a.get("http://47.106.74.67:8080/system/showprinters").then(function(n){t.printerList=n.data.data}).catch(function(t){alert("获取打印机列表失败!")})},addPrinterDom:function(){this.isAddShow=!1,this.printerList.unshift({id:this.newPrinterId,printerStatus:14})},quit:function(){this.isAddShow=!1},setInfo:function(){var t=this;c.a.get("http://47.106.74.67:8080/system/status").then(function(n){200==n.status&&(t.tuntu=n.data.data.handlingCapacity,t.connumber=n.data.data.printersSum,t.error=10*n.data.data.errorRate,t.printing=n.data.data.isTyping,t.number=n.data.data.typesSum,t.total=n.data.data.unitsSum)}).catch(function(t){})}},created:function(){this.showTyping(),this.showPrinters();setInterval(this.setInfo,1e3)}}),l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"container"}},[e("div",{staticClass:"wrapper",attrs:{id:"nav"}},[e("div",{staticClass:"user"},[e("span",{staticClass:"userTitle"},[t._v("\n\t\t\t\t\t基于合同网协议的集群打印系统\n\t\t\t\t")]),t._v(" "),e("a",{attrs:{href:"#"}}),t._v(" "),e("span",{staticClass:"user_name",domProps:{textContent:t._s(t.userName)}})])]),t._v(" "),e("div",{staticClass:"wrapper mh of"},[e("div",{staticClass:"subwrapper of"},[e("div",{staticClass:"sidebar"},[e("a",{attrs:{href:"#",id:"add_printer"},on:{click:function(n){t.isAddShow=!0}}},[t._v("增加打印机")]),t._v(" "),0==t.printerList.length?e("p",[t._v("当前没有打印机")]):t._e(),t._v(" "),t._l(t.printerList,function(t){return e("ul",{key:t,staticClass:"sb_printer"},[e("printer",{attrs:{printer:t}})],1)})],2),t._v(" "),e("div",{staticClass:"system"},[e("p",{staticClass:"system-head"},[t._v("系统状态提醒")]),t._v(" "),e("ul",[e("li",[t._v("当前吞吐量: "),e("span",[t._v(t._s(t.tuntu)+"bt/s")])]),t._v(" "),e("li",[t._v("主控板连接数量: "),e("span",[t._v(t._s(t.connumber))])]),t._v(" "),e("li",[t._v("打印失误率:  "),e("span",[t._v(t._s(t.error)+"%")])]),t._v(" "),e("li",[t._v("是否在打印： "),e("span",[t._v(t._s(t.printing))])]),t._v(" "),e("li",[t._v("当前打印数量： "),e("span",[t._v(t._s(t.number)+"份")])]),t._v(" "),e("li",[t._v("打印机连接总数量： "),e("span",[t._v(t._s(t.total))])])])]),t._v(" "),e("div",{staticClass:"section"},[e("p",{staticClass:"section-head"},[t._v("打印状态")]),t._v(" "),e("ul",{staticClass:"sb_order"},[e("li",{class:{cur:t.isShow},attrs:{id:"ab_od_typing"},on:{click:t.showTyping}},[t._v("正在打印订单")]),t._v(" "),e("li",{class:{cur:!t.isShow},attrs:{id:"ab_od_typed"},on:{click:t.showTyped}},[t._v("打印完成订单")]),t._v(" "),e("li",{staticStyle:{background:"#8985e3"},attrs:{id:"ab_od_search",onclick:"window.open('../../html/orderBuy.html')"}},[t._v("\n\t\t                \t\t自助下单\n\t\t                \t")]),t._v(" "),e("li",{staticStyle:{background:"#85afe3"},attrs:{id:"ab_od_search",onclick:"window.open('../../html/batchSearch.html')"}},[t._v("\n\t\t                \t\t批次查询\n\t\t                \t")]),t._v(" "),e("li",{staticStyle:{background:"#85e38d"},attrs:{id:"ab_od_search",onclick:"window.open('../../html/ordersearch.html')"}},[t._v("\n\t\t                \t\t查询订单\n\t\t                \t")])]),t._v(" "),e("div",{staticClass:"typing_up"},[e("div",{staticClass:"typing_up_main"},[t._m(0),t._v(" "),0==t.curList.length?e("div",{staticClass:"order"},[e("p",{staticClass:"ct"},[t._v(" 当前没有订单")])]):t._e(),t._v(" "),t._l(t.curList,function(n){return e("div",{key:n,staticClass:"order_box"},[e("div",{staticClass:"order"},[e("p",{staticClass:"order_number"},[t._v("\n\t                    \t\t\t\t"+t._s(n.id)+"\n\t                                ")]),t._v(" "),e("p",{staticClass:"order_status"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.showOrderText(n.orderStatus))+"\n\t                                ")])])])})],2)])])]),t._v(" "),t.isAddShow?e("add-printer",{attrs:{userid:t.userId},on:{add:t.addPrinterDom},model:{value:t.newPrinterId,callback:function(n){t.newPrinterId=n},expression:"newPrinterId"}},[e("button",{on:{click:t.quit}},[t._v("取消")])]):t._e()],1),t._v(" "),e("div",{attrs:{id:"ware"}})])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"order head"},[n("p",{staticClass:"order_number"},[this._v("订单编号")]),this._v(" "),n("p",{staticClass:"order_status"},[this._v("订单状态")])])}]};var h=e("vSla")(p,l,!1,function(t){e("EciI"),e("iKx/")},"data-v-a2587c10",null);n.a=h.exports},"6pSA":function(t,n){},"8bN1":function(t,n){},CNqO:function(t,n){},EciI:function(t,n){},"F97/":function(t,n){},NWWq:function(t,n,e){"use strict";(function(t){var a=e("4g3E");t.on("unhandledRejection",function(t){console.log("unhandledRejection",t.test)}),n.a={name:"app",components:{"order-index":a.a}}}).call(n,e("V0EG"))},"T/Wj":function(t,n,e){"use strict";var a=e("NWWq"),r={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("order-index")],1)},staticRenderFns:[]};var i=function(t){e("6pSA"),e("CNqO")},s=e("vSla")(a.a,r,!1,i,"data-v-270ea046",null);n.a=s.exports},hJ9p:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){var n=e("MVMM"),a=e("T/Wj"),r=e("0u0K"),i=e("jjUj");n.default.config.productionTip=!1,t.on("unhandledRejection",function(t){console.log("unhandledRejection",t.test)}),new n.default({el:"#app",router:r.a,store:i.a,template:"<App/>",components:{App:a.a}})}.call(n,e("V0EG"))},"iKx/":function(t,n){},jjUj:function(t,n,e){"use strict";var a=e("MVMM"),r=e("9rMa"),i=e("a3Yh"),s=e.n(i),c=e("aA9S"),o=e.n(c),u=(e("mu2H"),{namespaced:!0,state:{id:void 0,userName:"",account:"",admin:0,allUsers:[],curLists:[]},getters:{},actions:{},mutations:s()({},"setInfo",function(t,n){o()(t,n)})});a.default.use(r.a);n.a=new r.a.Store({modules:{namespaced:!0,user:u}})},mu2H:function(t,n,e){"use strict";var a=e("aozt");e.n(a).a.create({baseURL:"/api/"})}},[3]);
//# sourceMappingURL=orderIndex.95f2520cce08001dd612.js.map